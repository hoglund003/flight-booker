<h1>Flight booker</h1>

<%= form_with model: @flight, method: :get do |f| %>

  <%= f.label "Travel from:" %>
  <%= f.select(:departure_airport_id, @airports) %>

  <%= f.label "Travel to:" %>
  <%= f.select(:arrival_airport_id, @airports) %>
  
  <%= f.label "Number of passangers:" %>
  <%= f.select(:number_of_passengers, @passengers) %>

  <%= f.label "Select date" %>
  <%= f.select(:departure_time, @dates) %>

  <%= f.submit "Search" %>

<% end %>

<% if @results.any? %>
  <table>
    <thead>
      <td>From</td>
      <td>To</td>
      <td>Date</td>
      <td>Time</td>
    </thead>
    <tbody>
      <% @results.each do |flight| %>
        <tr>
          <td><%= flight.departure_airport.airport_code %></td>
          <td><%= flight.arrival_airport.airport_code %></td>
          <td><%= Time.at(flight.departure_time).strftime('%d.%m.%Y')  %></td>
          <td><%= Time.at(flight.departure_time).strftime('%H:%m')  %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
